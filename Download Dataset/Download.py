import os
from multiprocessing.pool import ThreadPool
def download_url(url):
    api = "<ForneÃ§a sua API aqui>"
    print("downloading: "+url+"\n")
    os.system("curl -O --remote-header-name -G -d apikey=" + api + " -d sha256=" + url + " https://androzoo.uni.lu/api/download --silent" )
    return url

arquivo = open("listaNew.csv","r")
#arquivo = open("teste.csv","r")

listaApk = []


for linha in arquivo:
    linha = linha.replace("\r","")
    linha = linha.replace("\n","")
    listaApk.append(linha)

arquivo.close()

results = ThreadPool(5).imap_unordered(download_url, listaApk)
for r in results:
    print(r)